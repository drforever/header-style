/* 顶部导航栏样式组件 */
/* 使用最高优先级确保稳定性 */

// 自定义字体
@font-face {
  font-family: 'CustomTitle';
  src: url($tencent-w7) format('truetype');
  font-weight: normal;
  font-style: normal;
}

// 使用多重选择器提高优先级，确保覆盖所有情况
html body .d-header-wrap .d-header,
html .d-header-wrap .d-header,
.d-header-wrap .d-header,
.d-header {
  height: 3.5em !important;
  background-color: #3B66F5 !important;
  background: #3B66F5 !important;
  border-bottom: none !important;
}

// 导航栏容器高度
.d-header-wrap {
  height: 3.5em !important;
}

.d-header .wrap {
  height: 100%;
}

// 站点标题和Logo - 使用自定义字体
html body .d-header .title a,
html body .d-header .title .header-title,
.d-header .title a,
.d-header .title .header-title,
.d-header-wrap .d-header .title a {
  color: #ffffff !important;
  font-family: 'CustomTitle', sans-serif !important;
}

// 站点标题容器 - 图标和文字垂直居中对齐
html body .d-header .title,
.d-header .title {
  display: flex !important;
  align-items: center !important;
}

html body .d-header .logo-wrapper,
.d-header .logo-wrapper,
html body .d-header .home-logo-wrapper-outlet,
.d-header .home-logo-wrapper-outlet {
  display: flex !important;
  align-items: center !important;
}

html body .d-header .title a,
.d-header .title a {
  display: flex !important;
  align-items: center !important;
  gap: 8px;
}

// 站点文字Logo垂直居中
html body .d-header #site-text-logo,
.d-header #site-text-logo,
html body .d-header .text-logo,
.d-header .text-logo {
  display: flex !important;
  align-items: center !important;
  line-height: 1.2 !important;
  vertical-align: middle !important;
  overflow: visible !important;
  padding-bottom: 4px !important;
  height: auto !important;
  min-height: 1.5em !important;
}

// 确保标题容器不截断内容
html body .d-header .title,
.d-header .title,
html body .d-header .title a,
.d-header .title a,
html body .d-header .home-logo-wrapper-outlet,
.d-header .home-logo-wrapper-outlet {
  overflow: visible !important;
}

// 所有图标 - 使用最广泛的选择器
html body .d-header .d-icon,
.d-header .d-icon,
.d-header .btn .d-icon,
.d-header .btn-flat .d-icon,
.d-header .header-dropdown-toggle .d-icon,
.d-header-wrap .d-header .d-icon,
.d-header svg.d-icon {
  color: #ffffff !important;
  fill: #ffffff !important;
}

// 按钮
html body .d-header .btn,
html body .d-header .btn-flat,
.d-header .btn,
.d-header .btn-flat,
.d-header .icon,
.d-header .header-buttons button {
  color: #ffffff !important;
}

// 汉堡菜单图标
.d-header .hamburger-dropdown .d-icon,
.d-header .menu-panel .d-icon {
  color: #ffffff !important;
}

// 搜索图标
.d-header .search-dropdown .d-icon,
.d-header .search-button .d-icon {
  color: #ffffff !important;
}

// 用户头像边框
.d-header .current-user .avatar {
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
}

// 匿名模式按钮 - 非激活状态
html body .d-header .anonymous-toggle-btn,
.d-header .anonymous-toggle-btn {
  border-color: #ffffff !important;
  color: #ffffff !important;
  background-color: transparent !important;
  background: transparent !important;
  
  .d-icon {
    color: #ffffff !important;
  }
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
    background: rgba(255, 255, 255, 0.15) !important;
  }
}

// 匿名模式按钮 - 激活状态
html body .d-header .anonymous-toggle-btn.is-anonymous,
.d-header .anonymous-toggle-btn.is-anonymous {
  background-color: transparent !important;
  background: transparent !important;
  color: #ffffff !important;
  border: none !important;
  
  .d-icon {
    color: #ffffff !important;
  }
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.15) !important;
    background: rgba(255, 255, 255, 0.15) !important;
  }
}

// 下拉菜单箭头
.d-header .anonymous-toggle-btn .d-icon-caret-down {
  color: inherit !important;
}

// 确保hover状态也使用固定颜色
html body .d-header .btn:hover,
html body .d-header .btn-flat:hover,
.d-header .btn:hover,
.d-header .btn-flat:hover,
.d-header .icon:hover {
  color: #ffffff !important;
  
  .d-icon {
    color: #ffffff !important;
  }
}

// 导航栏上的头像按钮 - 保持透明背景
.d-header .current-user,
.d-header .header-dropdown-toggle,
.d-header .btn.no-text.icon.btn-flat {
  background-color: transparent !important;
  background: transparent !important;
}

// ============================================
// 用户下拉菜单样式 - 确保文字可见
// ============================================

// 最外层下拉菜单容器
html body .user-menu.revamped.menu-panel.drop-down,
html body .user-menu.revamped,
html body .menu-panel.drop-down {
  background-color: #ffffff !important;
  background: #ffffff !important;
  color: #333333 !important;
  
  // 内部所有元素
  *:not(.btn-primary):not(.btn-primary *) {
    color: #333333 !important;
  }
  
  // 图标
  .d-icon,
  svg {
    color: #333333 !important;
    fill: #333333 !important;
  }
}

// 下拉面板内部容器
html body .panel-body,
html body .panel-body-contents,
html body .menu-tabs-container,
html body .quick-access-panel,
html body .panel-body-bottom {
  background-color: #ffffff !important;
  background: #ffffff !important;
  color: #333333 !important;
}

// 菜单内所有文字
html body .user-menu.revamped *,
html body .menu-panel.drop-down *,
html body .panel-body *,
html body .panel-body-contents *,
html body .quick-access-panel *,
html body .menu-tabs-container *,
html body .panel-body-bottom * {
  color: #333333 !important;
}

// 菜单内图标
html body .user-menu.revamped .d-icon,
html body .user-menu.revamped svg,
html body .menu-panel.drop-down .d-icon,
html body .menu-panel.drop-down svg,
html body .panel-body .d-icon,
html body .panel-body svg,
html body .quick-access-panel .d-icon,
html body .quick-access-panel svg {
  color: #333333 !important;
  fill: #333333 !important;
}

// 菜单内按钮
html body .user-menu.revamped .btn,
html body .user-menu.revamped .btn-flat,
html body .menu-panel.drop-down .btn,
html body .menu-panel.drop-down .btn-flat,
html body .panel-body .btn,
html body .panel-body .btn-flat,
html body .panel-body-bottom .btn,
html body .panel-body-bottom .btn-flat {
  background-color: transparent !important;
  color: #333333 !important;
}

// 主按钮保持蓝色
html body .user-menu.revamped .btn-primary,
html body .menu-panel.drop-down .btn-primary,
html body .panel-body .btn-primary,
html body .panel-body-bottom .btn-primary {
  background-color: #3B66F5 !important;
  color: #ffffff !important;
  
  * {
    color: #ffffff !important;
  }
}
